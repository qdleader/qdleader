# 1.å®‰è£…docker

## a.macå®‰è£…docker

### ç”¨ brew å®‰è£…

```js
brew install docker --cask
```
å®‰è£… æˆåŠŸåä¼šæç¤º
ğŸº  docker was successfully installed!


å¦‚æœæ­¤æ—¶æŠ¥
```js
 Here's the output: ln: /usr/local/bin/docker: Permission denied
```

æ‰§è¡Œ
```js
sudo chown -R $(whoami) /usr/local
```
ç„¶åå†æ‰§è¡Œä¸€ä¸‹å®‰è£…å‘½ä»¤å³å¯



## b.é˜¿é‡Œäº‘å®‰è£…docker 
åŸºäºé˜¿é‡Œäº‘æœåŠ¡å™¨Linuxçš„CentOS7

ä¸”ç¡®ä¿å·²ç»å®‰è£…äº†gccç›¸å…³ç¯å¢ƒ
```js
yum -y install gcc
yum -y install gcc-c++

```

ä¸€ã€æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å®˜ç½‘åœ°å€ï¼š[!https://www.docker.com/]

### 1ã€å…ˆå¸è½½æ—§ç‰ˆæœ¬
```js
yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
```

### 2ã€å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…
```js
yum install -y yum-utils
```


### 3ã€é…ç½®é˜¿é‡Œäº‘é•œåƒä»“åº“
# ä½¿ç”¨å›½å†…é˜¿é‡Œäº‘çš„
```js
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
```

### 4ã€æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•
```js
yum makecache fast
```

### 5ã€å®‰è£…Docker CE
# ceæ˜¯ç¤¾åŒºç‰ˆï¼Œeeæ˜¯ä¼ä¸šç‰ˆ
```js
yum install docker-ce docker-ce-cli containerd.io
```

### 6ã€å¯åŠ¨Docker
```js
systemctl start docker
```

### 7ã€æµ‹è¯•å‘½ä»¤
```js
docker version #æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ˜¯å¦å®‰è£…æˆåŠŸ
```


### 8ã€è¿è¡Œhello world
```js
docker run hello-world
```

### 9ã€æŸ¥çœ‹ä¸‹è½½çš„é•œåƒ
```js
docker images
```





### å…¶ä»–å‘½ä»¤
```js

systemctl start docker     #è¿è¡ŒDockerå®ˆæŠ¤è¿›ç¨‹
systemctl stop docker      #åœæ­¢Dockerå®ˆæŠ¤è¿›ç¨‹
systemctl restart docker   #é‡å¯Dockerå®ˆæŠ¤è¿›ç¨‹
systemctl enable docker    #è®¾ç½®Dockerå¼€æœºè‡ªå¯åŠ¨
systemctl status docker    #æŸ¥çœ‹Dockerçš„è¿è¡ŒçŠ¶æ€

```

## c.åä¸ºäº‘å®‰è£…docker
```js
$ cd /etc/yum.repos.d
$ wget https://repo.huaweicloud.com/repository/conf/openeuler_x86_64.repo
$ yum clean all
$ yum makecache
```

## å®‰è£…docker
```js
$ yum -y install docker
```


## å¯åŠ¨docker
```js
$ sudo service docker start
$ docker --version
```
Docker version 18.09.0, build c0d3c43

## å¼€æœºè‡ªå¯åŠ¨
```js
sudo systemctl enable docker
```


# 2.docker å®‰è£…nginx


## Docker å®‰è£… Nginx
Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç† web æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† IMAP/POP3/SMTP æœåŠ¡ ã€‚


1ã€æŸ¥çœ‹å¯ç”¨çš„ Nginx ç‰ˆæœ¬
è®¿é—® Nginx é•œåƒåº“åœ°å€ï¼š https://hub.docker.com/_/nginx?tab=tagsã€‚
å¯ä»¥é€šè¿‡ Sort by æŸ¥çœ‹å…¶ä»–ç‰ˆæœ¬çš„ Nginxï¼Œé»˜è®¤æ˜¯æœ€æ–°ç‰ˆæœ¬ nginx:latestã€‚
ä½ ä¹Ÿå¯ä»¥åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­æ‰¾åˆ°å…¶ä»–ä½ æƒ³è¦çš„ç‰ˆæœ¬ï¼š


æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ docker search nginx å‘½ä»¤æ¥æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬ï¼š
```
docker search nginx
```

### 2ã€å–æœ€æ–°ç‰ˆçš„ Nginx é•œåƒ
è¿™é‡Œæˆ‘ä»¬æ‹‰å–å®˜æ–¹çš„æœ€æ–°ç‰ˆæœ¬çš„é•œåƒï¼š

```js
$ docker pull nginx:latest
```

3ã€æŸ¥çœ‹æœ¬åœ°é•œåƒ
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦å·²å®‰è£…äº† nginxï¼š

```js
docker images
```


 3ã€åˆ›å»ºNginxé…ç½®æ–‡ä»¶ 
å¯åŠ¨å‰éœ€è¦å…ˆåˆ›å»ºNginxå¤–éƒ¨æŒ‚è½½çš„é…ç½®æ–‡ä»¶ï¼ˆ /Users/docker/nginx/conf/nginx.confï¼‰
ä¹‹æ‰€ä»¥è¦å…ˆåˆ›å»º , æ˜¯å› ä¸ºNginxæœ¬èº«å®¹å™¨åªå­˜åœ¨/etc/nginx ç›®å½• , æœ¬èº«å°±ä¸åˆ›å»º nginx.conf æ–‡ä»¶
å½“æœåŠ¡å™¨å’Œå®¹å™¨éƒ½ä¸å­˜åœ¨ nginx.conf æ–‡ä»¶æ—¶, æ‰§è¡Œå¯åŠ¨å‘½ä»¤çš„æ—¶å€™ dockerä¼šå°†nginx.conf ä½œä¸ºç›®å½•åˆ›å»º , è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœ ã€‚



# åˆ›å»ºæŒ‚è½½ç›®å½•

```js
sudo mkdir -p /Users/docker1/nginx/conf
mkdir -p /Users/docker1/nginx/log
mkdir -p /Users/docker1/nginx/html
```

 chmod 777 /Users/docker/

## å®¹å™¨ä¸­çš„nginx.confæ–‡ä»¶å’Œconf.dæ–‡ä»¶å¤¹å¤åˆ¶åˆ°å®¿ä¸»æœº

```js
# ç”Ÿæˆå®¹å™¨
docker run --name nginx -p 80:80 -d nginx
# å°†å®¹å™¨nginx.confæ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœº
docker cp nginx:/etc/nginx/nginx.conf /Users/docker1/nginx/conf/nginx.conf
# å°†å®¹å™¨conf.dæ–‡ä»¶å¤¹ä¸‹å†…å®¹å¤åˆ¶åˆ°å®¿ä¸»æœº
docker cp nginx:/etc/nginx/conf.d /Users/docker1/nginx/conf/conf.d
# å°†å®¹å™¨ä¸­çš„htmlæ–‡ä»¶å¤¹å¤åˆ¶åˆ°å®¿ä¸»æœº
docker cp nginx:/usr/share/nginx/html /Users/docker1/nginx/

```

åˆ é™¤äº†åˆšæ‰çš„å®¹å™¨
docker rm -f nginx



```js
docker run \
-p 80:80 \
--name nginx1 \
-v /Users/docker1/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \
-v /Users/docker1/nginx/conf/conf.d:/etc/nginx/conf.d \
-v /Users/docker1/nginx/log:/var/log/nginx \
-v /Users/docker1/nginx/html:/usr/share/nginx/html \
-d nginx:latest
```

å‘½ä»¤	   æè¿°
â€“name nginx	å¯åŠ¨å®¹å™¨çš„åå­—
-d	åå°è¿è¡Œ
-p 80:80	å°†å®¹å™¨çš„ 80(åé¢é‚£ä¸ª) ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 80(å‰é¢é‚£ä¸ª) ç«¯å£
-v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf	æŒ‚è½½nginx.confé…ç½®æ–‡ä»¶
-v /home/nginx/conf/conf.d:/etc/nginx/conf.d	æŒ‚è½½nginxé…ç½®æ–‡ä»¶
-v /home/nginx/log:/var/log/nginx	æŒ‚è½½nginxæ—¥å¿—æ–‡ä»¶
-v /home/nginx/html:/usr/share/nginx/html	æŒ‚è½½nginxå†…å®¹
nginx:latest	æœ¬åœ°è¿è¡Œçš„ç‰ˆæœ¬
\	shell å‘½ä»¤æ¢è¡Œ








æµ‹è¯•

curl 127.0.0.1:9002




5ã€å®‰è£…æˆåŠŸ
æœ€åæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨å¯ä»¥ç›´æ¥è®¿é—® 9002 ç«¯å£çš„ nginx æœåŠ¡ï¼š



## å…¶ä»–

æˆ‘ä»¬æƒ³è¦æ”¹å˜é…ç½®æ–‡ä»¶nginx.conf ï¼Œä¹Ÿå¯ä»¥è¿›å…¥å®¹å™¨å»ä¿®æ”¹ï¼š


### è¿›å…¥å®¹å™¨
```js
docker exec -it nginx bash
```

nginx.confé…ç½®æ–‡ä»¶åœ¨ /etc/nginx/  ä¸‹é¢ï¼Œä½†æ˜¯ä½ ä½¿ç”¨vim nginx.conf æˆ–è€…vi nginx.conf

ä¼šå‘ç°viæˆ–è€…vimå‘½ä»¤æ²¡æœ‰ç”¨ï¼Œè§£å†³åŠæ³•ï¼šapt-get  update  å®Œæˆä¹‹å apt-get install vim

æ­¤æ—¶ä½ å°±å¯ä»¥è‡ªå·±å®šåˆ¶nginx.conæ–‡ä»¶äº†ï¼Œæ”¹å¥½é…ç½®æ–‡ä»¶ä¹‹åé‡å¯å®¹å™¨ï¼Œæ­¥éª¤ï¼Œå…ˆæŠŠå®¹å™¨åœäº†


docker stop nginx  ç„¶åé‡å¯ docker start nginx


ç¢°åˆ°nginx 403 æ—¶å€™ï¼Œå¯èƒ½æ˜¯æ˜ å°„æ–‡ä»¶çš„æƒé™ä¸å¤Ÿ

  chmod -R 755 /Users/docker1/nginx/html



 sudo  scp  /Users/icourt/github/next-react-ssr/out/1.zip  root@121.36.47.43:/Users/docker1/nginx/html


 unzip 1.zip
 




