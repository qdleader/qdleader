import{_ as s,c as a,a as p,o as t}from"./app-KfnfuIf0.js";const e={};function o(c,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="vue3中的hooks" tabindex="-1"><a class="header-anchor" href="#vue3中的hooks"><span>vue3中的hooks</span></a></h1><blockquote><p>将可复用功能抽离为外部JS文件</p></blockquote><blockquote><p>函数名/文件名以use开头，形如：useXX</p></blockquote><blockquote><p>引用时将响应式变量或者方法显式解构暴露出来如：const {nameRef，Fn} = useXX() （在setup函数解构出自定义hooks的变量和方法）</p></blockquote><h2 id="加法-hook" tabindex="-1"><a class="header-anchor" href="#加法-hook"><span>加法 hook</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">useAdd</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">}</span></span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> addNum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">addFn</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">addFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        addNum<span class="token punctuation">.</span>value <span class="token operator">=</span> num1 <span class="token operator">+</span> num2</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">        addNum<span class="token punctuation">,</span></span>
<span class="line">        addFn</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> useAdd</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="减法-hook" tabindex="-1"><a class="header-anchor" href="#减法-hook"><span>减法 hook</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">//减法功能-Hook</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useSub</span>  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> subNum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">subFn</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">subFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        subNum<span class="token punctuation">.</span>value <span class="token operator">=</span> num1 <span class="token operator">-</span> num2</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">        subNum<span class="token punctuation">,</span></span>
<span class="line">        subFn</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在组建中使用：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">        num1<span class="token operator">:</span><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;num1&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;width:100px&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        num2<span class="token operator">:</span><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;num2&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;width:100px&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>加法等于<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span> addNum <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>减法等于<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span> subNum <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line">​</span>
<span class="line"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">import</span> useAdd <span class="token keyword">from</span> <span class="token string">&#39;./useAdd.js&#39;</span>     <span class="token comment">//引入自动hook </span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useSub <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./useSub.js&#39;</span> <span class="token comment">//引入自动hook </span></span>
<span class="line">​</span>
<span class="line"><span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">//加法功能-自定义Hook（将响应式变量或者方法形式暴露出来）</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> addNum<span class="token punctuation">,</span> addFn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAdd</span><span class="token punctuation">(</span><span class="token punctuation">{</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">addFn</span><span class="token punctuation">(</span>num1<span class="token punctuation">.</span>value<span class="token punctuation">,</span> num2<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//减法功能-自定义Hook (将响应式变量或者方法形式暴露出来)</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> subNum<span class="token punctuation">,</span> subFn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSub</span><span class="token punctuation">(</span><span class="token punctuation">{</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">subFn</span><span class="token punctuation">(</span>num1<span class="token punctuation">.</span>value<span class="token punctuation">,</span> num2<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line">​</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vue3自定义hooks可以灵活传递任何参数来改变它的逻辑-参数不限于其他hook的暴露出来的变量" tabindex="-1"><a class="header-anchor" href="#vue3自定义hooks可以灵活传递任何参数来改变它的逻辑-参数不限于其他hook的暴露出来的变量"><span>Vue3自定义Hooks可以灵活传递任何参数来改变它的逻辑，参数不限于其他hook的暴露出来的变量</span></a></h2><p>算平均的Hook</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">//平均功能-Hook</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useAverage</span><span class="token punctuation">(</span><span class="token parameter">addNum</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> averageNum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">watch</span><span class="token punctuation">(</span>addNum<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">addNum</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">averageFn</span><span class="token punctuation">(</span>addNum<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">averageFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">addNum</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    averageNum<span class="token punctuation">.</span>value <span class="token operator">=</span> addNum <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    averageNum<span class="token punctuation">,</span></span>
<span class="line">    averageFn<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>组件内使用</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">//组件内</span></span>
<span class="line"><span class="token comment">//加法功能-自定义Hook（将响应式变量或者方法形式暴露出来）</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> addNum<span class="token punctuation">,</span> addFn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAdd</span><span class="token punctuation">(</span><span class="token punctuation">{</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">addFn</span><span class="token punctuation">(</span>num1<span class="token punctuation">.</span>value<span class="token punctuation">,</span> num2<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//主动调用，返回最新addNum</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//平均功能-自定义Hook- hook传入参数值来其他hook暴露出来的变量</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> averageNum<span class="token punctuation">,</span> averageFn<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAverage</span><span class="token punctuation">(</span>addNum<span class="token punctuation">)</span></span>
<span class="line"><span class="token function">averageFn</span><span class="token punctuation">(</span>addNum<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vue3自定义Hooks可以灵活传递任何参数来改变它的逻辑，参数不限于其他hook的暴露出来的变量，这提高了Vue3在抽象逻辑方面的灵活性。</p><h3 id="_3、mixin同名变量会被覆盖-vue3自定义hook可以在引入的时候对同名变量重命名" tabindex="-1"><a class="header-anchor" href="#_3、mixin同名变量会被覆盖-vue3自定义hook可以在引入的时候对同名变量重命名"><span>3、Mixin同名变量会被覆盖，Vue3自定义Hook可以在引入的时候对同名变量重命名</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">Vue3自定义Hooks</span>
<span class="line"><span class="token comment">//加法功能-自定义Hook（将响应式变量或者方法形式暴露出来）</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">totalNum</span><span class="token operator">:</span>addNum<span class="token punctuation">,</span> addFn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAdd</span><span class="token punctuation">(</span><span class="token punctuation">{</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">addFn</span><span class="token punctuation">(</span>num1<span class="token punctuation">.</span>value<span class="token punctuation">,</span> num2<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//减法功能-自定义Hook (将响应式变量或者方法形式暴露出来)</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">totalNum</span><span class="token operator">:</span>subNum<span class="token punctuation">,</span> subFn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSub</span><span class="token punctuation">(</span><span class="token punctuation">{</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">subFn</span><span class="token punctuation">(</span>num1<span class="token punctuation">.</span>value<span class="token punctuation">,</span> num2<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>在Vue3自定义Hooks中，虽然加法和减法Hooks都返回了totalNum，但是利用ES6对象解构很轻松给变量重命名</p></blockquote>`,19)])])}const u=s(e,[["render",o]]),i=JSON.parse('{"path":"/vue3/vue3%E4%B8%AD%E7%9A%84hooks.html","title":"vue3中的hooks","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"vue3/vue3中的hooks.md"}');export{u as comp,i as data};
