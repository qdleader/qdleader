import{_ as s,c as a,a as p,o as t}from"./app-KfnfuIf0.js";const e={};function l(o,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="vue3-ts添加公共富文本组件" tabindex="-1"><a class="header-anchor" href="#vue3-ts添加公共富文本组件"><span>vue3+ts添加公共富文本组件</span></a></h1><h2 id="下载" tabindex="-1"><a class="header-anchor" href="#下载"><span>下载</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> wangeditor --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="新建一个editor-vue-的组件" tabindex="-1"><a class="header-anchor" href="#新建一个editor-vue-的组件"><span>新建一个editor.vue 的组件</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">.</span>part_right <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">background</span><span class="token operator">:</span> #f2f2f2<span class="token punctuation">;</span></span>
<span class="line">    min<span class="token operator">-</span>height<span class="token operator">:</span> 100vh<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>list <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">width</span><span class="token operator">:</span><span class="token number">96</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* background: gray; */</span></span>
<span class="line">    padding<span class="token operator">-</span>top<span class="token operator">:</span> 50px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>list ul li<span class="token punctuation">{</span></span>
<span class="line">    list<span class="token operator">-</span>style<span class="token operator">-</span>type<span class="token operator">:</span> none<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">    border<span class="token operator">-</span>bottom<span class="token operator">:</span> 1px solid #e6e5e5<span class="token punctuation">;</span></span>
<span class="line">    min<span class="token operator">-</span>height<span class="token operator">:</span> 50px<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">background</span><span class="token operator">:</span> #d5d5d5<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>list ul li<span class="token operator">&gt;</span>div<span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">    line<span class="token operator">-</span>height<span class="token operator">:</span> 50px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>list ol li<span class="token punctuation">{</span></span>
<span class="line">    list<span class="token operator">-</span>style<span class="token operator">-</span>type<span class="token operator">:</span> none<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">    border<span class="token operator">-</span>bottom<span class="token operator">:</span> 1px solid #e6e5e5<span class="token punctuation">;</span></span>
<span class="line">    min<span class="token operator">-</span>height<span class="token operator">:</span> 30px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>list ol li<span class="token operator">&gt;</span>div<span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">    line<span class="token operator">-</span>height<span class="token operator">:</span> 30px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>flright <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">float</span><span class="token operator">:</span> right<span class="token punctuation">;</span></span>
<span class="line">    margin<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">2</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>   </span>
<span class="line">        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;shop&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;text-area&quot;</span> <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">&quot;editorElemMenu&quot;</span></span>
<span class="line">                    style<span class="token operator">=</span><span class="token string">&quot;backgroundColor: &#39;#f1f1f1&#39;; border:&#39;1px solid #ccc&#39;&quot;</span></span>
<span class="line">                    className<span class="token operator">=</span><span class="token string">&quot;editorElem-menu&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;height: 300;border: &#39;1px solid #ccc&#39;,borderTop: &#39;none&#39;&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;editorElemBody&quot;</span> className<span class="token operator">=</span><span class="token string">&quot;editorElem-body&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">,</span>reactive<span class="token punctuation">,</span>toRefs<span class="token punctuation">,</span>defineComponent<span class="token punctuation">,</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token constant">E</span> <span class="token keyword">from</span> <span class="token string">&#39;wangeditor&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">DataProps</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">editor</span><span class="token operator">:</span> any<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">editorContent</span><span class="token operator">:</span> string</span>
<span class="line">    <span class="token function-variable function">getContent</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">ref<span class="token operator">?</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;Editor&#39;</span><span class="token punctuation">,</span></span>
<span class="line">     <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">options</span><span class="token operator">:</span> Object<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">value</span><span class="token operator">:</span> String<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> editorElemMenu <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> editorElemBody <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token literal-property property">data</span><span class="token operator">:</span> DataProps <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">editorContent</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">editor</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function-variable function">getContent</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span></span>
<span class="line">                data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>txt<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> elemMenu <span class="token operator">=</span> editorElemMenu<span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> elemBody <span class="token operator">=</span> editorElemBody<span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">             data<span class="token punctuation">.</span>editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">E</span><span class="token punctuation">(</span>elemMenu<span class="token punctuation">,</span> elemBody<span class="token punctuation">)</span></span>
<span class="line">              <span class="token comment">// 使用 onchange 函数监听内容的变化，并实时更新到 state 中</span></span>
<span class="line">                    data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">html</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>txt<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                         data<span class="token punctuation">.</span>editorContent <span class="token operator">=</span> data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>txt<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                             <span class="token comment">// 向外部返回一个处理过的值</span></span>
<span class="line">                         <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;onEditor&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>txt<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;update:value&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>txt<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                    data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function-variable function">customUploadImg</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">files</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">insert</span><span class="token operator">:</span> any</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                          <span class="token comment">// files 是 input 中选中的文件列表insert 是获取图片 url 后，插入到编辑器的方法</span></span>
<span class="line">                          <span class="token comment">// let file;</span></span>
<span class="line">                          <span class="token comment">// if (files &amp;&amp; files.length) {</span></span>
<span class="line">                          <span class="token comment">//     file = files[0];</span></span>
<span class="line">                          <span class="token comment">// } else {</span></span>
<span class="line">                          <span class="token comment">//     return</span></span>
<span class="line">                          <span class="token comment">// }</span></span>
<span class="line">                          <span class="token comment">// 图片上传</span></span>
<span class="line">                          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;files1&quot;</span><span class="token punctuation">,</span>files<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                          <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                          formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;files&quot;</span><span class="token punctuation">,</span>files<span class="token punctuation">,</span>insert<span class="token punctuation">)</span></span>
<span class="line">                          <span class="token comment">// formData.append(&#39;Banners&#39;,{id:editorinfo.id,naviChildId:editorinfo.naviChildId})</span></span>
<span class="line">                      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                    data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>config<span class="token punctuation">.</span>menus <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                        <span class="token string">&#39;head&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 标题</span></span>
<span class="line">                        <span class="token string">&#39;bold&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 粗体</span></span>
<span class="line">                        <span class="token string">&#39;fontSize&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 字号</span></span>
<span class="line">                        <span class="token string">&#39;fontName&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 字体</span></span>
<span class="line">                        <span class="token string">&#39;italic&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 斜体</span></span>
<span class="line">                        <span class="token string">&#39;underline&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 下划线</span></span>
<span class="line">                        <span class="token string">&#39;strikeThrough&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 删除线</span></span>
<span class="line">                        <span class="token string">&#39;foreColor&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 文字颜色</span></span>
<span class="line">                        <span class="token string">&#39;backColor&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 背景颜色</span></span>
<span class="line">                        <span class="token string">&#39;link&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 插入链接</span></span>
<span class="line">                        <span class="token string">&#39;list&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 列表</span></span>
<span class="line">                        <span class="token string">&#39;justify&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 对齐方式</span></span>
<span class="line">                        <span class="token string">&#39;quote&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 引用</span></span>
<span class="line">                        <span class="token string">&#39;emoticon&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 表情</span></span>
<span class="line">                        <span class="token string">&#39;image&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 插入图片</span></span>
<span class="line">                        <span class="token string">&#39;table&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 表格</span></span>
<span class="line">                        <span class="token string">&#39;video&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 插入视频</span></span>
<span class="line">                        <span class="token string">&#39;code&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 插入代码</span></span>
<span class="line">                        <span class="token string">&#39;undo&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 撤销</span></span>
<span class="line">                        <span class="token string">&#39;redo&#39;</span>  <span class="token comment">// 重复</span></span>
<span class="line">                    <span class="token punctuation">]</span></span>
<span class="line">                    data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>config<span class="token punctuation">.</span>uploadImgShowBase64 <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">                    data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// data.getContent()</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">const</span> refData <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">...</span>refData<span class="token punctuation">,</span></span>
<span class="line">            editorElemMenu<span class="token punctuation">,</span></span>
<span class="line">            editorElemBody</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用的组件" tabindex="-1"><a class="header-anchor" href="#调用的组件"><span>调用的组件</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;part_right&quot;</span><span class="token operator">&gt;</span>   </span>
<span class="line">        <span class="token operator">&lt;</span>Editor ref<span class="token operator">=</span><span class="token string">&quot;Editor&quot;</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;content&quot;</span> @onEditor<span class="token operator">=</span><span class="token string">&quot;onEditor&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">,</span>reactive<span class="token punctuation">,</span>toRefs<span class="token punctuation">,</span>defineComponent<span class="token punctuation">,</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">import</span> Editor <span class="token keyword">from</span> <span class="token string">&#39;@/components/tool/editor.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">DataProps</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">content</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function-variable function">showBack</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">ref<span class="token operator">?</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;about&#39;</span><span class="token punctuation">,</span></span>
<span class="line">     <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">         Editor</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> Editor <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token literal-property property">data</span><span class="token operator">:</span> DataProps <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment">//获取富文本中的内容</span></span>
<span class="line">            <span class="token function-variable function">onEditor</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;父组件&quot;</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment">// 富文本回显</span></span>
<span class="line">            <span class="token function-variable function">showBack</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                data<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">&#39;回显内容公众号qdleader&#39;</span></span>
<span class="line">                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot; data.content&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>content<span class="token punctuation">)</span></span>
<span class="line">                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">                    Editor<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            data<span class="token punctuation">.</span><span class="token function">showBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">const</span> refData <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">...</span>refData<span class="token punctuation">,</span></span>
<span class="line">            Editor</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样就完成可以在vue3加ts中使用 富文本啦</p><p>拓展。。</p><p>有的同学需要自定义上传图片的接口</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function-variable function">customUploadImg</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">files</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">insert</span><span class="token operator">:</span> any</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// files 是 input 中选中的文件列表insert 是获取图片 url 后，插入到编辑器的方法</span></span>
<span class="line">        <span class="token comment">// let file;</span></span>
<span class="line">        <span class="token comment">// if (files &amp;&amp; files.length) {</span></span>
<span class="line">        <span class="token comment">//     file = files[0];</span></span>
<span class="line">        <span class="token comment">// } else {</span></span>
<span class="line">        <span class="token comment">//     return</span></span>
<span class="line">        <span class="token comment">// }</span></span>
<span class="line">        <span class="token comment">// 图片上传</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;files1&quot;</span><span class="token punctuation">,</span>files<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;files&quot;</span><span class="token punctuation">,</span>files<span class="token punctuation">,</span>insert<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// formData.append(&#39;Banners&#39;,{id:editorinfo.id,naviChildId:editorinfo.naviChildId})</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 把请求你们服务器地址获得的图片链接，替换到下面src里面即可</span></span>
<span class="line">      data<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>txt<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;img src=&#39;https://rmxgh-1305579889.cos.ap-beijing.myqcloud.com/img/64bec1a86509170772c19fc5f88d84e1.jpg&#39; /&gt;&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11)])])}const i=s(e,[["render",l]]),r=JSON.parse('{"path":"/vue3/vue3_ts%E6%B7%BB%E5%8A%A0%E5%85%AC%E5%85%B1%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BB%84%E4%BB%B6.html","title":"vue3+ts添加公共富文本组件","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"vue3/vue3+ts添加公共富文本组件.md"}');export{i as comp,r as data};
