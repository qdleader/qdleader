import{_ as n,c as a,a as e,o as p}from"./app-D8HvJIFE.js";const o={};function t(l,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="linux上安装mongodb" tabindex="-1"><a class="header-anchor" href="#linux上安装mongodb"><span>linux上安装mongodb</span></a></h1><p>MongoDB的安装过程 1.第一步下载mongodb的安装包</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span></span>
<span class="line"></span>
<span class="line"> mkdir mongodb</span>
<span class="line"> cd mongodb</span>
<span class="line"> mkdir data</span>
<span class="line"> mkdir logs</span>
<span class="line"> cd logs</span>
<span class="line"> touch mongodb<span class="token punctuation">.</span>log</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">mkdir <span class="token operator">-</span>p soft<span class="token operator">/</span>mongodb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd  <span class="token operator">/</span>soft<span class="token operator">/</span>mongodb</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">wget https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>fastdl<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>org<span class="token operator">/</span>linux<span class="token operator">/</span>mongodb<span class="token operator">-</span>linux<span class="token operator">-</span>x86_64<span class="token operator">-</span>rhel80<span class="token operator">-</span><span class="token number">5.0</span><span class="token number">.4</span><span class="token punctuation">.</span>tgz</span>
<span class="line"></span>
<span class="line">tar <span class="token operator">-</span>zxvf mongodb<span class="token operator">-</span>linux<span class="token operator">-</span>x86_64<span class="token operator">-</span>rhel80<span class="token operator">-</span><span class="token number">5.0</span><span class="token number">.4</span><span class="token punctuation">.</span>tgz  </span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">mv mongodb<span class="token operator">-</span>linux<span class="token operator">-</span>x86_64<span class="token operator">-</span>rhel80<span class="token operator">-</span><span class="token number">5.0</span><span class="token number">.4</span>  <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mongodb<span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>5.配置环境变量 命令如下：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token constant">MONGODB_HOME</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mongodb</span>
<span class="line"><span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span>$<span class="token constant">MONGODB_HOME</span><span class="token operator">/</span>bin<span class="token operator">:</span>$<span class="token constant">PATH</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>应用下配置文件</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">source <span class="token operator">/</span>etc<span class="token operator">/</span>profile</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>添加 MongoDB 配置文件 常用的配置选项：</p><p>bind_ip：指定MongoDB监听的IP地址。默认为127.0.0.1，表示只监听本地回环地址。如果你希望MongoDB能够通过网络访问，可以将该选项设置为0.0.0.0，表示监听所有可用的IP地址。</p><p>port：指定MongoDB监听的端口号。默认为27017，通常不需要修改。</p><p>dbpath：指定MongoDB数据文件存储的路径。默认为/var/lib/mongodb。</p><p>logpath：指定MongoDB日志文件的路径。默认为/var/log/mongodb/mongod.log。</p><p>logappend：指定是否在日志文件末尾追加日志。默认为false，表示每次启动MongoDB时，会清空日志文件。</p><p>journal.enabled：指定是否启用Journaling，用于数据持久性和恢复。默认为true，建议保持默认值。</p><p>storage.wiredTiger.engineConfig.cacheSizeGB：指定WiredTiger存储引擎的缓存大小，单位为GB。默认为总系统内存的一半，建议根据实际情况调整。</p><p>security.authorization：指定是否启用身份验证。默认为disabled，表示不启用身份验证。在生产环境中，建议将该选项设置为enabled，并配置合适的用户和角色权限。</p><p>replication.replSetName：指定复制集的名称。默认为空，表示不启用复制集。如果需要使用复制集功能，可以将该选项设置为一个非空的名称。</p><p>net.maxIncomingConnections：指定MongoDB最大允许的入站连接数。默认为65536，根据实际情况进行调整。</p><p>processManagement.fork：指定是否在后台运行MongoDB进程。默认为true，表示在后台运行。如果需要在前台运行，可以将该选项设置为false。</p><p>touch /usr/local/mongodb/etc/mongodb.conf</p><p>mongodb.conf的内容</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">dbpath<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mongodb<span class="token operator">/</span>data</span>
<span class="line"></span>
<span class="line">logpath<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mongodb<span class="token operator">/</span>logs<span class="token operator">/</span>mongodb<span class="token punctuation">.</span>log</span>
<span class="line"></span>
<span class="line">logappend<span class="token operator">=</span><span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">port<span class="token operator">=</span><span class="token number">27017</span> </span>
<span class="line"></span>
<span class="line">bind_ip<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span></span>
<span class="line"></span>
<span class="line">fork<span class="token operator">=</span><span class="token boolean">true</span> </span>
<span class="line"></span>
<span class="line">#auth<span class="token operator">=</span><span class="token boolean">true</span> </span>
<span class="line"></span>
<span class="line">#bind_ip<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7.启动mongodb服务 命令如下： cd usr/local/mongodb/mongodb-linux-x86_64-rhel80-5.0.4/bin</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">.</span><span class="token operator">/</span>mongod <span class="token operator">--</span>config <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mongodb<span class="token operator">/</span>etc<span class="token operator">/</span>mongodb<span class="token punctuation">.</span>conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果报错的话</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">.</span><span class="token operator">/</span>mongod<span class="token operator">:</span> error <span class="token keyword">while</span> loading shared libraries<span class="token operator">:</span> libcrypto<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1.1</span><span class="token operator">:</span> cannot open shared object file<span class="token operator">:</span> No such file or directory</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">[</span>root@iv<span class="token operator">-</span>ye39k0b2805i3z5gsheu bin<span class="token punctuation">]</span># yum install <span class="token operator">-</span>y libcrypto<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token operator">*</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动服务之后测试，进入数据库: ./mongo localhost:27017</p><p>开放防火墙的 27017 端口</p><p>四、MongoDB用户管理 创建用户 切换到admin数据库：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">use admin</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>创建管理员admin：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;readWriteAnyDatabase&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;userAdminAnyDatabase&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;dbAdminAnyDatabase&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数释义： <ul><li>roles：数组形式，配置具体权限 <ul><li><code>role: &quot;readWriteAnyDatabase&quot;</code>表示有读写任意数据库的权限</li><li><code>db: &quot;admin&quot;</code>，表示：当前权限只对<code>admin</code>数据库生效</li></ul></li></ul></li><li><code>admin</code>数据库，是 MongoDB 的管理级的特殊数据库，是有特殊意义的。</li><li>所以<code>readWriteAnyDatabase</code>这个权限虽然设置给了<code>admin</code>数据库，但实际上，<code>admin</code>数据库里还拥有<code>readWriteAnyDatabase</code>这个权限的<code>admin</code>用户，所以，该用户对任意数据库都具有读写的功能，不只局限在<code>admin</code>数据库。</li><li><strong>注意</strong>：只有<code>admin</code>数据库，才有<code>readWriteAnyDatabase</code>权限，如果是自己创建的数据库，无法为用户设置<code>readWriteAnyDatabase</code>权限，会报错该数据库没有这个权限的用户。</li></ul><p>创建超级管理员root：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>root</code>权限也只能放在<code>admin</code>数据库内才能生效</li><li><code>root</code>是最高权限，可以做任何事情</li></ul><p>创建普通用户zhangsan：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;readWrite&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;school&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;userAdmin&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;school&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;readWrite&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;myBlog&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&quot;userAdmin&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&quot;myBlog&quot;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MongoDB常用权限 read：允许读取指定数据库中数据的权限。 readWrite：允许读、写指定数据库中数据的权限。 dbAdmin：允许对指定数据库中执行管理函数的权限，如索引创建、删除，查看统计或访问 system.profile。 userAdmin：允许对指定数据库执行用户管理的权限，比如创建、删除和修改用户。 dbOwner：允许对指定数据库执行任何管理操作。该角色结合了readWrite 、 dbAdmin和userAdmin角色授予的权限。 <strong>readAnyDatabase</strong> 只对admin数据库可用，授予用户对所有数据库的read权限。 readWriteAnyDatabase： 只对admin数据库可用，授予用户对所有数据库的readWrite权限。 userAdminAnyDatabase： 只对admin数据库可用，授予用户对所有数据库的userAdmin权限。 dbAdminAnyDatabase： 只对admin数据库可用，授予用户对所有数据库的dbAdmin权限。 root： 只对admin数据库可用。超级账号，超级权限。 修改密码</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token string">&quot;用户名&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">&quot;新密码&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>删除用户</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">dropUser</span><span class="token punctuation">(</span><span class="token string">&quot;用户名&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,47)])])}const i=n(o,[["render",t]]),c=JSON.parse('{"path":"/%E6%9C%8D%E5%8A%A1%E7%AB%AF/mongodb/linux%E4%B8%8A%E5%AE%89%E8%A3%85mongodb.html","title":"linux上安装mongodb","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1761877037000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"bd7640b59685e94edda53b9f6d34fbec27933dd4","time":1761877037000,"email":"yk4545945@163.com","author":"qdleader","message":"docs: 更新仓库链接和添加交流社区信息"}]},"filePathRelative":"服务端/mongodb/linux上安装mongodb.md"}');export{i as comp,c as data};
