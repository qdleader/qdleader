import{_ as n,c as a,a as e,o as p}from"./app-KfnfuIf0.js";const t={};function l(i,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="v008-vue中数据变化页面并不变化问题" tabindex="-1"><a class="header-anchor" href="#v008-vue中数据变化页面并不变化问题"><span>V008-vue中数据变化页面并不变化问题</span></a></h1><p>由于我们vue2中的数据双向绑定时候经常遇到这种，数据变化了，视图没有变化的情况，这是为什么呢？怎么解决呢？</p><h5 id="探索1" tabindex="-1"><a class="header-anchor" href="#探索1"><span>探索1</span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">obj1</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line"><span class="token function">btn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">this</span><span class="token punctuation">.</span>obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;123&#39;</span>    </span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span>          </span>
<span class="line"> <span class="token function">btn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">this</span><span class="token punctuation">.</span>obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;变了呀&#39;</span>    </span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span>         </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{obj1}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当点击按钮1和按钮2时候，页面上的obj1是一点没有变化的，也就是经典的那种数据变了，页面没有变。</p><p>但是，当我们给obj1一个初始属性name时候，在改变name，就会发现，页面还是同步的。</p><h5 id="探索2" tabindex="-1"><a class="header-anchor" href="#探索2"><span>探索2</span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">obj1</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;我是初始值&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">btn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">this</span><span class="token punctuation">.</span>obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;123&#39;</span>    </span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span>          </span>
<span class="line"> <span class="token function">btn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">this</span><span class="token punctuation">.</span>obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;变了呀&#39;</span>    </span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span>         </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{obj1}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们继续探索</p><p>我们再加深一层</p><h6 id="探索3" tabindex="-1"><a class="header-anchor" href="#探索3"><span>探索3</span></a></h6><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">obj1</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">12</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">btn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">this</span><span class="token punctuation">.</span>obj1<span class="token punctuation">.</span>name<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;123&#39;</span>    </span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span>          </span>
<span class="line"> <span class="token function">btn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">this</span><span class="token punctuation">.</span>obj1<span class="token punctuation">.</span>name<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;变了呀&#39;</span>    </span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span>         </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{obj1}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发现这样也是变了的</p><p>所以我们可以得出结论</p><h2 id="只有在data里初始化的数据才是响应的-vue不能检测到对象属性的添加或删除-没有在data里声明的属性不是响应的。跟对象的层级多少也没有关系的" tabindex="-1"><a class="header-anchor" href="#只有在data里初始化的数据才是响应的-vue不能检测到对象属性的添加或删除-没有在data里声明的属性不是响应的。跟对象的层级多少也没有关系的"><span>只有在data里初始化的数据才是响应的，Vue不能检测到对象属性的添加或删除，没有在data里声明的属性不是响应的。跟对象的层级多少也没有关系的</span></a></h2><p>明白怎么造成的了，那咋解决呢？</p><p>比如这个改变了这个newArr的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token literal-property property">newArr</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们直接赋值</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;前端架构师&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>newArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>newList <span class="token operator">=</span> arr</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>会发现数据变了，页面没有变</p><p>有几种方法来解决这个问题</p><p>#方法1. 用 Object.assign</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>newArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>newList <span class="token operator">=</span> arr</span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>newArr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>newArr<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>用Object.assign 追加属性</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>newArr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>newArr<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">grade</span><span class="token operator">:</span> <span class="token string">&#39;100&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="这个object-assign并不是深拷贝-只复制了一层。。" tabindex="-1"><a class="header-anchor" href="#这个object-assign并不是深拷贝-只复制了一层。。"><span>这个Object.assign并不是深拷贝，只复制了一层。。</span></a></h2><p>eg1:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">obj1</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">btn2() {</span>
<span class="line">    this.obj1.page = 1</span>
<span class="line">    this.obj1 = Object.assign({},this.obj1)</span>
<span class="line">    console.log(this.obj1)</span>
<span class="line">},</span>
<span class="line">\`\`\`js</span>
<span class="line"></span>
<span class="line">这样就同步了</span>
<span class="line"></span>
<span class="line">但我们在往深了一层呢？</span>
<span class="line"></span>
<span class="line">这里就有一个面试题了</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>let obj = { a:1, b:{ x:1, y:1, } }</p><p>let obj1 = Object.assign({}, obj) obj.a= 2</p><p>console.log(obj.a) // 2 console.log(obj1.a) // 1 说明第一层拷贝没问题</p><p>obj.b.x = 2 console.log(obj.b.x) //2 console.log(obj1.b.x) //2</p><p>说明深层没有拷贝</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"></span>
<span class="line">#方法2. 用 this.$set</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>let arr = [{name:&#39;前端架构师&#39;}] this.$set(this.newArr[index],&#39;newList&#39;,arr)</p><p>或 Vue.set(this.newArr[index],&#39;newList&#39;,arr)</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">有同学说，姨？我怎么用<span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span>改了也不管用呢</span>
<span class="line"></span>
<span class="line">那是因为</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>data() { obj1:{</p><p>} }</p><p>btn2() { this.obj1.name = &#39;小明&#39; this.$set(this.obj1,name,&#39;小明&#39;) }</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">你用<span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span>之前你是不是还对相同的属性做了赋值操作，把<span class="token keyword">this</span><span class="token punctuation">.</span>obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;小明&#39;</span>这个去掉就生效了。</span>
<span class="line"></span>
<span class="line">## <span class="token number">3.</span>生成新数组的方法</span>
<span class="line"></span>
<span class="line">数组数据变动，使用某些方法操作数组，变动数据时，有些方法无法被vue监测</span>
<span class="line"></span>
<span class="line"><span class="token operator">&gt;</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，unshift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，splice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>可被vue检测到</span>
<span class="line"><span class="token operator">&gt;</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>。这些不会改变原始数组，但总是返回一个新数组。当使用非变异方法时，可以用新数组替换旧数组。</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vue不能检测以下变动的数组： 1、当你利用索引直接设置一个项时，vm.items[indexOfItem] = newValue 2、当你修改数组的长度时，例如： vm.items.length = newLength</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">比如你在监听不到变化的数组后面加个concat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>arr 是那个变了数组</p><p>arr.concat([]);</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"></span>
<span class="line">## 4.this.$<span class="token function">forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">&gt; vue多层循环，动态改变数据后渲染的很慢或者不渲染</span>
<span class="line">可在动态改变数据的方法，第一行加上</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>this.$forceUpdate();</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"></span>
<span class="line">## 5. 异步更新队列 this.$<span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">数据第一次获取到了，也渲染了，但是第二次之后数据只有在再一次渲染页面的时候更新，并不能实时更新。</span>
<span class="line"></span>
<span class="line">Vue 异步执行 DOM 更新。只要观察到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据改变。如果同一个 watcher 被多次触发，只会被推入到队列中一次。</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>data() { obj:&#39;未更新&#39; }</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>btn2() { this.obj = &#39;已更新&#39; console.log(this.$el.textContent) //未更新 this.$nextTick(() =&gt; { console.log(this.$el.textContent) //已更新 }) }</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">因为 <span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>返回一个 Promise 对象，所以上面写法可以优化一下</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>async btn2() { this.obj = &#39;已更新&#39; console.log(this.$el.textContent) //未更新</p><p>await this.$nextTick() console.log(this.$el.textContent) //已更新 }</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div>`,63)])])}const o=n(t,[["render",l]]),u=JSON.parse('{"path":"/vue/V008-vue%E4%B8%AD%E6%95%B0%E6%8D%AE%E5%8F%98%E5%8C%96%E9%A1%B5%E9%9D%A2%E5%B9%B6%E4%B8%8D%E5%8F%98%E5%8C%96%E9%97%AE%E9%A2%98.html","title":"V008-vue中数据变化页面并不变化问题","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"vue/V008-vue中数据变化页面并不变化问题.md"}');export{o as comp,u as data};
