import{_ as s,c as a,a as n,o as i}from"./app-KfnfuIf0.js";const r={};function t(p,e){return i(),a("div",null,[...e[0]||(e[0]=[n(`<h1 id="require查包的过程" tabindex="-1"><a class="header-anchor" href="#require查包的过程"><span>require查包的过程</span></a></h1><p>最近，使用vue-cli时，webpack配置里面配置了：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">resolve：<span class="token punctuation">{</span></span>
<span class="line"><span class="token literal-property property">‘vue$’</span><span class="token operator">:</span> ‘vue<span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>esm<span class="token punctuation">.</span>js</span>
<span class="line">……</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只有这样，我们在index.js(这是我的项目里面文件)中引入vue时（require（’vue’））才可以正常使用，不然会报错。</p><p>我们下面将讲解一下require时，它是如何搜索包的，这样再进行解释就可以清楚明了了。</p><p>类似于windows系统扫描path变量一样：</p><p>require也是按照一个变量集的顺序从上到下依次查找。 顺序是：</p><blockquote><ol><li>项目下的node_modules</li><li>全局的node_modules</li><li>项目根路径（举个栗子：我在根目录下面有一个index.js;在util包下面有一个app.vue;index中要引用它，就可以：require(‘./util/app.vue’)，这个路径就是在项目路径下去定位）</li></ol></blockquote><p>从上面可以观察到，如果是require用户自定义的’包’时，那么速度相对要慢一点，因为优先级是最低的</p><p>接着说一下如何在这个路径的顺序基础上进行引入。</p><p><strong>按照给定的名字在上面的路径下找(如果没有扩展名，默认按照：.js;.json;.node为扩展名去匹配)，如果找到的与文件夹名字相同，那么这就是找到了所谓的‘包’，在包下的package.json文件查找一个main属性，并拿到它的值进行寻找对应的文件。如果有，则进行加载；如果没有，那么继续进行寻找，知道三种目录都搜索不到时才进行报错。</strong></p><p>那么我们再来回头看一下vue的那个配置，vue/dist/vue.esm.js ，原本main配置里面的是：dist/vue.runtime.common.js。添加这个配置说明vue-cli不需要这个文件，而是需要vue.esm.js。了解了这个规则，那么我们就很容易看懂这些配置了。</p>`,12)])])}const o=s(r,[["render",t]]),c=JSON.parse('{"path":"/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/js%E7%B1%BB/%E5%85%B6%E4%BB%96%E7%B1%BB/require%E6%9F%A5%E5%8C%85%E7%9A%84%E8%BF%87%E7%A8%8B.html","title":"require查包的过程","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"前端面试/js类/其他类/require查包的过程.md"}');export{o as comp,c as data};
