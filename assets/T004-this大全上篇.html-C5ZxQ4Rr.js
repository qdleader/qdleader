import{_ as s,c as a,a as e,o as p}from"./app-KfnfuIf0.js";const i={};function l(o,n){return p(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="t004-this大全上篇" tabindex="-1"><a class="header-anchor" href="#t004-this大全上篇"><span>T004-this大全上篇</span></a></h1><p>我们知道，this对象在运行时基于函数的执行环境绑定的：在全局函数中，this等于window，而当this某个对象的方法调用时，this等于那个对象。</p><ol><li>this的绑定形式 1.默认绑定 2.隐式绑定 3.显示绑定 4.英绑定 5.new绑定</li></ol><p>2.五种绑定的优先级 默认绑定 &lt; 隐式绑定 &lt; 显示绑定 &lt; 硬绑定 &lt; new绑定</p><p>3.详说每种绑定的特点</p><h2 id="_1-默认绑定" tabindex="-1"><a class="header-anchor" href="#_1-默认绑定"><span>1.默认绑定</span></a></h2><h4 id="eg1" tabindex="-1"><a class="header-anchor" href="#eg1"><span>eg1</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//2</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>this指向window并且在foo之前被赋值了所以是2，没有错</p><h4 id="eg2" tabindex="-1"><a class="header-anchor" href="#eg2"><span>eg2</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//undefined</span></span>
<span class="line"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>this指向undefined是非严格模式下：如果开启了严格模式this指向undefined
</code></pre><p>所以下面这</p><h4 id="eg3" tabindex="-1"><a class="header-anchor" href="#eg3"><span>eg3</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a<span class="token punctuation">)</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>答案是： Window{...} undefined 10 Uncaught TypeError</p><p>严格模式下 函数中的this 为undefined</p><h4 id="eg4" tabindex="-1"><a class="header-anchor" href="#eg4"><span>eg4</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>undefined undefined undefined</p><p>why? 因为let和const不会把变量绑定到window 上。</p><h4 id="eg5" tabindex="-1"><a class="header-anchor" href="#eg5"><span>eg5</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>答案 window 1 为什么是1，因为是this。a而不是a，window下的a就是1呀</p><p>同理： var a = 1 function foo () { var a = 2 function inner () { console.log(this) console.log(this.a) } inner() }</p><p>foo()</p><p>答案是 window 1</p><h2 id="二-隐式绑定" tabindex="-1"><a class="header-anchor" href="#二-隐式绑定"><span>二 隐式绑定</span></a></h2><p>谁最后调用的函数，函数内的this就指向谁 也就是this永远指向最后调用它的那个对象（不包含箭头函数）</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"> <span class="token keyword">var</span> baz <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">     <span class="token literal-property property">foo</span><span class="token operator">:</span> foo</span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"> baz<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 2</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>作为foo函数调用对象baz，就成了this的上下文对象啦。 隐士绑定this丢失的两中情况</p><h4 id="_1-主动赋值-本质相当于为函数起了别名" tabindex="-1"><a class="header-anchor" href="#_1-主动赋值-本质相当于为函数起了别名"><span>1.主动赋值（本质相当于为函数起了别名）</span></a></h4><p>主动赋值丢失本质是将 函数的引用暴露在全局作用域下</p><pre><code>function foo() {
    console.log(this.a);
}
var baz = {
    a: 2,
    foo: foo
}
var bar = baz.foo;    // 主动赋值 ** 不是主动执行 ** （只是地址的一次 引用）
bar();       // 输出 undefined
</code></pre><h4 id="_2-函数传参丢失-将函数作为参数传递-也是一次引擎的右查询" tabindex="-1"><a class="header-anchor" href="#_2-函数传参丢失-将函数作为参数传递-也是一次引擎的右查询"><span>2.函数传参丢失( 将函数作为参数传递 也是一次引擎的右查询 )</span></a></h4><p>回调函数本质也是将函数作为参数传递，是一次隐式的赋值操作 **</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"></span>
<span class="line">  function foo() {</span>
<span class="line">    console.log(this.a);</span>
<span class="line">  }</span>
<span class="line">  var baz = {</span>
<span class="line">    a: 2,</span>
<span class="line">    foo: foo</span>
<span class="line">  }</span>
<span class="line"></span>
<span class="line">  var bar = baz.foo;      // 这里其实不是绑定，只是一次 地址的引用( 函数也是一个对象 )</span>
<span class="line">  setTimeout(bar, 100);       // 函数传参 回调函数 丢失绑定</span>
<span class="line">           // 输出 undefined</span>
<span class="line">\`\`\`js</span>
<span class="line"></span>
<span class="line">主动赋值操作 是因为进行了 函数地址的引用, 将函数的 上下文环境改变了 ** 区别于函数的调用执行 **</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>function foo () { console.log(this.a) }; var obj = { a: 1, foo }; var a = 2; var foo2 = obj.foo; var obj2 = { a: 3, foo2: obj.foo }</p><p>obj.foo(); foo2(); obj2.foo2();</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">答案</span>
<span class="line"><span class="token number">1</span></span>
<span class="line"><span class="token number">2</span></span>
<span class="line"><span class="token number">3</span></span>
<span class="line">obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>中的<span class="token keyword">this</span>指向调用者obj</span>
<span class="line"><span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">发生了隐式丢失，调用者是window，使得foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>中的<span class="token keyword">this</span>指向window</span>
<span class="line"><span class="token function">foo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">发生了隐式丢失，调用者是obj2，使得foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>中的<span class="token keyword">this</span>指向obj2</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>function foo () { console.log(this.a) } function doFoo (fn) { console.log(this) fn() } var obj = { a: 1, foo } var a = 2 doFoo(obj.foo)</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">答案为</span>
<span class="line"></span>
<span class="line">window</span>
<span class="line"><span class="token number">2</span></span>
<span class="line"></span>
<span class="line">这里我们将obj<span class="token punctuation">.</span>foo当成参数传递到doFoo函数中，在传递的过程中，obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数内的<span class="token keyword">this</span>发生了改变，指向了window。</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>function foo () { console.log(this.a) } function doFoo (fn) { console.log(this) fn() } var obj = { a: 1, foo } var a = 2 var obj2 = { a: 3, doFoo }</p><p>obj2.doFoo(obj.foo)</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">答案：</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">doFoo</span><span class="token operator">:</span> f <span class="token punctuation">}</span></span>
<span class="line"><span class="token number">2</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>&quot;use strict&quot; function foo () { console.log(this.a) } function doFoo (fn) { console.log(this) fn() } var obj = { a: 1, foo } var a = 2 var obj2 = { a: 3, doFoo }</p><p>obj2.doFoo(obj.foo)</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"></span>
<span class="line">答案</span>
<span class="line"><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">doFoo</span><span class="token operator">:</span> f <span class="token punctuation">}</span></span>
<span class="line">Uncaught TypeError<span class="token operator">:</span> Cannot read property <span class="token string">&#39;a&#39;</span> <span class="token keyword">of</span> <span class="token keyword">undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,48)])])}const c=s(i,[["render",l]]),u=JSON.parse('{"path":"/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/js%E7%B1%BB/this%E7%B1%BB/T004-this%E5%A4%A7%E5%85%A8%E4%B8%8A%E7%AF%87.html","title":"T004-this大全上篇","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"前端面试/js类/this类/T004-this大全上篇.md"}');export{c as comp,u as data};
