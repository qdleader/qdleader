import{_ as s,c as a,a as t,o as e}from"./app-KfnfuIf0.js";const i={};function p(c,n){return e(),a("div",null,[...n[0]||(n[0]=[t(`<h1 id="content-visibility-长列表网页渲染" tabindex="-1"><a class="header-anchor" href="#content-visibility-长列表网页渲染"><span>content-visibility 长列表网页渲染</span></a></h1><p>content-visibility。只需要一行 CSS 代码，就可以实现可见网页只加载可见区域内容，使网页的渲染性能得到数倍的提升！</p><p>content-visibility 属性有三个可选值:</p><p>visible: 默认值。对布局和呈现不会产生什么影响。 hidden: 元素跳过其内容的呈现。用户代理功能（例如，在页面中查找，按 Tab 键顺序导航等）不可访问已跳过的内容，也不能选择或聚焦。类似于对其内容设置了 display: none 属性。 auto: 对于用户可见区域的元素，浏览器会正常渲染其内容；对于不可见区域的元素，浏览器会暂时跳过其内容的呈现，等到其处于用户可见区域时，浏览器在渲染其内容。</p><h2 id="兼容性" tabindex="-1"><a class="header-anchor" href="#兼容性"><span>兼容性</span></a></h2><p>content-visibility 是 chrome85 版本开始支持的。</p><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><p>当元素的部分内容如<img>标签这种，元素的高度是有图片内容决定的，因此在这种情况下，如果使用 content-visibility，则可见视图外的 img 初始未渲染，高度为 0，随着滚动条向下滑动，页面高度增加，会导致滚动条的滚动有问题。</p><h2 id="解决办法" tabindex="-1"><a class="header-anchor" href="#解决办法"><span>解决办法</span></a></h2><p>果在已知元素高度的情况下，可以使用 contains-intrinsic-size 属性，为上面的 card 添加：contains-intrinsic-size：312px;，这会给内容附一个初始高度值。（如果高度不固定也可以附一个大致的初始高度值，会使滚动条问题相对减少）。 修改代码如下:</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line">  <span class="token selector">.card</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">content-visibility</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">contain-intrinsic-size</span><span class="token punctuation">:</span> 312px<span class="token punctuation">;</span> // 添加此行</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>部分场景下它对浏览器的滚动条影响问题，如果你的列表项高度相同，那么可以通过 contain-intrinsic-size 来设置一个初始高度解决。如果列表项高度不固定而又非常重视用户的滚动条体验，那么不建议使用此属性</p>`,12)])])}const o=s(i,[["render",p]]),r=JSON.parse('{"path":"/%E4%BC%98%E5%8C%96/%E6%80%A7%E8%83%BD/content-visibility%E9%95%BF%E5%88%97%E8%A1%A8%E7%BD%91%E9%A1%B5%E6%B8%B2%E6%9F%93.html","title":"content-visibility 长列表网页渲染","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"优化/性能/content-visibility长列表网页渲染.md"}');export{o as comp,r as data};
