import{_ as n,c as a,a as p,o as e}from"./app-KfnfuIf0.js";const o={};function t(l,s){return e(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="图片类" tabindex="-1"><a class="header-anchor" href="#图片类"><span>图片类</span></a></h1><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;upload-box&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>upload</span>
<span class="line">      <span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">&quot;uuid&quot;</span></span>
<span class="line">      action<span class="token operator">=</span><span class="token string">&quot;#&quot;</span></span>
<span class="line">      <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span>&quot;<span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&#39;upload&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        selfDisabled <span class="token operator">?</span> <span class="token string">&#39;disabled&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        drag <span class="token operator">?</span> <span class="token string">&#39;no-border&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span></span>
<span class="line">      <span class="token punctuation">]</span>&quot;</span>
<span class="line">      <span class="token operator">:</span>multiple<span class="token operator">=</span><span class="token string">&quot;false&quot;</span></span>
<span class="line">      <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;selfDisabled&quot;</span></span>
<span class="line">      <span class="token operator">:</span>show<span class="token operator">-</span>file<span class="token operator">-</span>list<span class="token operator">=</span><span class="token string">&quot;false&quot;</span></span>
<span class="line">      <span class="token operator">:</span>http<span class="token operator">-</span>request<span class="token operator">=</span><span class="token string">&quot;handleHttpUpload&quot;</span></span>
<span class="line">      <span class="token operator">:</span>before<span class="token operator">-</span>upload<span class="token operator">=</span><span class="token string">&quot;beforeUpload&quot;</span></span>
<span class="line">      <span class="token operator">:</span>on<span class="token operator">-</span>success<span class="token operator">=</span><span class="token string">&quot;uploadSuccess&quot;</span></span>
<span class="line">      <span class="token operator">:</span>on<span class="token operator">-</span>error<span class="token operator">=</span><span class="token string">&quot;uploadError&quot;</span></span>
<span class="line">      <span class="token operator">:</span>drag<span class="token operator">=</span><span class="token string">&quot;drag&quot;</span></span>
<span class="line">      <span class="token operator">:</span>accept<span class="token operator">=</span><span class="token string">&quot;fileType.join(&#39;,&#39;)&quot;</span></span>
<span class="line">    <span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;imageUrl&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>img <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;imageUrl&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;upload-image&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;upload-handle&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token punctuation">.</span>stop<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!selfDisabled&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;handle-icon&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;editImg&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Edit <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;handle-icon&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;imgViewVisible = true&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>ZoomIn <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>查看<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!selfDisabled&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;handle-icon&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;deleteImg&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Delete <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;upload-empty&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;empty&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Plus <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>请上传图片<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>upload<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-upload__tip&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;tip&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-upload__tip&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;tip2&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>image<span class="token operator">-</span>viewer</span>
<span class="line">      v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;imgViewVisible&quot;</span></span>
<span class="line">      <span class="token operator">:</span>url<span class="token operator">-</span>list<span class="token operator">=</span><span class="token string">&quot;[imageUrl]&quot;</span></span>
<span class="line">      <span class="token decorator"><span class="token at operator">@</span><span class="token function">close</span></span><span class="token operator">=</span><span class="token string">&quot;imgViewVisible = false&quot;</span></span>
<span class="line">    <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;UploadImg&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> fileUploadAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/modules/common&quot;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span>
<span class="line">  ElNotification<span class="token punctuation">,</span></span>
<span class="line">  formContextKey<span class="token punctuation">,</span></span>
<span class="line">  formItemContextKey</span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;element-plus&quot;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> UploadProps<span class="token punctuation">,</span> UploadRequestOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;element-plus&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">UploadFileProps</span> <span class="token punctuation">{</span></span>
<span class="line">  imageUrl<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 图片地址 ==&gt; 必传</span></span>
<span class="line">  api<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>params<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token comment">// 上传图片的 api 方法，一般项目上传都是同一个 api 方法，在组件里直接引入即可 ==&gt; 非必传</span></span>
<span class="line">  drag<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token comment">// 是否支持拖拽上传 ==&gt; 非必传（默认为 true）</span></span>
<span class="line">  disabled<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token comment">// 是否禁用上传组件 ==&gt; 非必传（默认为 false）</span></span>
<span class="line">  fileSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 图片大小限制 ==&gt; 非必传（默认为 5M）</span></span>
<span class="line">  fileType<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 图片类型限制 ==&gt; 非必传（默认为 [&quot;image/jpeg&quot;, &quot;image/png&quot;, &quot;image/gif&quot;]）</span></span>
<span class="line">  height<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 组件高度 ==&gt; 非必传（默认为 150px）</span></span>
<span class="line">  width<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 组件宽度 ==&gt; 非必传（默认为 150px）</span></span>
<span class="line">  borderRadius<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 组件边框圆角 ==&gt; 非必传（默认为 8px）</span></span>
<span class="line">  enableDimension<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token comment">// 是否需要校验图片尺寸</span></span>
<span class="line">  imageScaleDimension<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 图片比例，传宽度/高度的值，例如传1为宽高比1:1，传1.5为宽高比3:2，图片比例存在时，宽度高度校验失效</span></span>
<span class="line">  imageScaleDimensionTip<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 图片比例上传失败提示</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 接受父组件参数</span></span>
<span class="line"><span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span>UploadFileProps<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  imageUrl<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  drag<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  disabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  fileSize<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">fileType</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">&quot;image/jpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  height<span class="token operator">:</span> <span class="token string">&quot;150px&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  width<span class="token operator">:</span> <span class="token string">&quot;150px&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  borderRadius<span class="token operator">:</span> <span class="token string">&quot;8px&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  enableDimension<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  imageScaleDimension<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  imageScaleDimensionTip<span class="token operator">:</span> <span class="token string">&quot;请上传尺寸为1:1的图片&quot;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/**</span>
<span class="line"> * @description 生成唯一 uuid</span>
<span class="line"> * @returns {String}</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">generateUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> uuid <span class="token operator">=</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> random <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">8</span> <span class="token operator">||</span> i <span class="token operator">===</span> <span class="token number">12</span> <span class="token operator">||</span> i <span class="token operator">===</span> <span class="token number">16</span> <span class="token operator">||</span> i <span class="token operator">===</span> <span class="token number">20</span><span class="token punctuation">)</span> uuid <span class="token operator">+=</span> <span class="token string">&quot;-&quot;</span></span>
<span class="line">    uuid <span class="token operator">+=</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">12</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> i <span class="token operator">===</span> <span class="token number">16</span> <span class="token operator">?</span> <span class="token punctuation">(</span>random <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">8</span> <span class="token operator">:</span> random<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> uuid</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 生成组件唯一id</span></span>
<span class="line"><span class="token keyword">const</span> uuid <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;id-&quot;</span> <span class="token operator">+</span> <span class="token function">generateUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 查看图片</span></span>
<span class="line"><span class="token keyword">const</span> imgViewVisible <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 获取 el-form 组件上下文</span></span>
<span class="line"><span class="token keyword">const</span> formContext <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>formContextKey<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 获取 el-form-item 组件上下文</span></span>
<span class="line"><span class="token keyword">const</span> formItemContext <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>formItemContextKey<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 判断是否禁用上传和删除</span></span>
<span class="line"><span class="token keyword">const</span> selfDisabled <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> props<span class="token punctuation">.</span>disabled <span class="token operator">||</span> formContext<span class="token operator">?.</span>disabled</span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/**</span>
<span class="line"> * @description 图片上传</span>
<span class="line"> * @param options upload 所有配置项</span>
<span class="line"> * */</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">UploadEmits</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token string">&quot;update:imageUrl&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineEmits</span><span class="token generic class-name"><span class="token operator">&lt;</span>UploadEmits<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">handleHttpUpload</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> UploadRequestOptions<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>file<span class="token punctuation">)</span></span>
<span class="line">  formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;fileType&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;common&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> api <span class="token operator">=</span> props<span class="token punctuation">.</span>api <span class="token operator">??</span> fileUploadAPI</span>
<span class="line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">api</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:imageUrl&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 调用 el-form 内部的校验方法（可自动校验）</span></span>
<span class="line">    formItemContext<span class="token operator">?.</span>prop <span class="token operator">&amp;&amp;</span></span>
<span class="line">      formContext<span class="token operator">?.</span><span class="token function">validateField</span><span class="token punctuation">(</span><span class="token punctuation">[</span>formItemContext<span class="token punctuation">.</span>prop <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    options<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/**</span>
<span class="line"> * @description 删除图片</span>
<span class="line"> * */</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">deleteImg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:imageUrl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/**</span>
<span class="line"> * @description 编辑图片</span>
<span class="line"> * */</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">editImg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>uuid<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> .el-upload__input</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">  dom <span class="token operator">&amp;&amp;</span> dom<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MouseEvent</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/**</span>
<span class="line"> * @description 文件上传之前判断</span>
<span class="line"> * @param rawFile 选择的文件</span>
<span class="line"> * */</span></span>
<span class="line"><span class="token keyword">const</span> beforeUpload<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">&quot;beforeUpload&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>rawFile<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> imgSize <span class="token operator">=</span> rawFile<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>fileSize</span>
<span class="line">  <span class="token keyword">const</span> imgType <span class="token operator">=</span> props<span class="token punctuation">.</span>fileType<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>rawFile<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token class-name"><span class="token keyword">as</span></span> <span class="token builtin">any</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">// 校验图片尺寸</span></span>
<span class="line">  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">checkImageDimension</span><span class="token punctuation">(</span>rawFile<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">const</span> fileType <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>imgType<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">ElNotification</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      title<span class="token operator">:</span> <span class="token string">&quot;温馨提示&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      message<span class="token operator">:</span> <span class="token string">&quot;上传图片不符合所需的格式！&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      type<span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>imgSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">ElNotification</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        title<span class="token operator">:</span> <span class="token string">&quot;温馨提示&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">上传失败！图片仅支持JPG、PNG格式，大小不超过 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>props<span class="token punctuation">.</span>fileSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">M！</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line">        type<span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> imgType <span class="token operator">&amp;&amp;</span> imgSize <span class="token operator">&amp;&amp;</span> fileType</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 判断尺寸方法</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">checkImageDimension</span> <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> File<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token comment">// 必须用file.raw</span></span>
<span class="line">    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 让页面中的img标签的src指向读取的路径</span></span>
<span class="line">      <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      img<span class="token punctuation">.</span>src <span class="token operator">=</span> reader<span class="token punctuation">.</span>result <span class="token keyword">as</span> <span class="token builtin">string</span></span>
<span class="line"></span>
<span class="line">      img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>imageScaleDimension<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>img<span class="token punctuation">.</span>width <span class="token operator">/</span> img<span class="token punctuation">.</span>height <span class="token operator">!==</span> props<span class="token punctuation">.</span>imageScaleDimension<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            ElNotification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>imageScaleDimensionTip<span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">/**</span>
<span class="line"> * @description 图片上传成功</span>
<span class="line"> * */</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">uploadSuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">ElNotification</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    title<span class="token operator">:</span> <span class="token string">&quot;温馨提示&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    message<span class="token operator">:</span> <span class="token string">&quot;图片上传成功！&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type<span class="token operator">:</span> <span class="token string">&quot;success&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/**</span>
<span class="line"> * @description 图片上传错误</span>
<span class="line"> * */</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">uploadError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">ElNotification</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    title<span class="token operator">:</span> <span class="token string">&quot;温馨提示&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    message<span class="token operator">:</span> <span class="token string">&quot;图片上传失败，请您重新上传！&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type<span class="token operator">:</span> <span class="token string">&quot;error&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>style scoped lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token keyword">is</span><span class="token operator">-</span>error <span class="token punctuation">{</span></span>
<span class="line">  <span class="token punctuation">.</span>upload <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>el<span class="token operator">-</span>upload<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>el<span class="token operator">-</span>upload<span class="token operator">-</span>dragger<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      border<span class="token operator">:</span> 1px dashed <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>color<span class="token operator">-</span>danger<span class="token punctuation">)</span> <span class="token operator">!</span>important<span class="token punctuation">;</span></span>
<span class="line">      <span class="token operator">&amp;</span><span class="token operator">:</span>hover <span class="token punctuation">{</span></span>
<span class="line">        border<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>color<span class="token operator">-</span>primary<span class="token punctuation">)</span> <span class="token operator">!</span>important<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>disabled<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token punctuation">.</span>el<span class="token operator">-</span>upload<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">.</span>el<span class="token operator">-</span>upload<span class="token operator">-</span>dragger <span class="token punctuation">{</span></span>
<span class="line">    cursor<span class="token operator">:</span> not<span class="token operator">-</span>allowed <span class="token operator">!</span>important<span class="token punctuation">;</span></span>
<span class="line">    background<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>disabled<span class="token operator">-</span>bg<span class="token operator">-</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    border<span class="token operator">:</span> 1px dashed <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>border<span class="token operator">-</span>color<span class="token operator">-</span>darker<span class="token punctuation">)</span> <span class="token operator">!</span>important<span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">&amp;</span><span class="token operator">:</span>hover <span class="token punctuation">{</span></span>
<span class="line">      border<span class="token operator">:</span> 1px dashed <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>border<span class="token operator">-</span>color<span class="token operator">-</span>darker<span class="token punctuation">)</span> <span class="token operator">!</span>important<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>upload<span class="token operator">-</span>box <span class="token punctuation">{</span></span>
<span class="line">  <span class="token punctuation">.</span>no<span class="token operator">-</span>border <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>el<span class="token operator">-</span>upload<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      border<span class="token operator">:</span> none <span class="token operator">!</span>important<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>upload<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span>el<span class="token operator">-</span>upload <span class="token punctuation">{</span></span>
<span class="line">      position<span class="token operator">:</span> relative<span class="token punctuation">;</span></span>
<span class="line">      display<span class="token operator">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">      align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">      justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">      width<span class="token operator">:</span> v<span class="token operator">-</span><span class="token function">bind</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      height<span class="token operator">:</span> v<span class="token operator">-</span><span class="token function">bind</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      overflow<span class="token operator">:</span> hidden<span class="token punctuation">;</span></span>
<span class="line">      border<span class="token operator">:</span> 1px dashed <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>border<span class="token operator">-</span>color<span class="token operator">-</span>darker<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      border<span class="token operator">-</span>radius<span class="token operator">:</span> v<span class="token operator">-</span><span class="token function">bind</span><span class="token punctuation">(</span>borderRadius<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      transition<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>transition<span class="token operator">-</span>duration<span class="token operator">-</span>fast<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token operator">&amp;</span><span class="token operator">:</span>hover <span class="token punctuation">{</span></span>
<span class="line">        border<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>color<span class="token operator">-</span>primary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">.</span>upload<span class="token operator">-</span>handle <span class="token punctuation">{</span></span>
<span class="line">          opacity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">.</span>el<span class="token operator">-</span>upload<span class="token operator">-</span>dragger <span class="token punctuation">{</span></span>
<span class="line">        display<span class="token operator">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">        align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">        justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">        width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">        height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">        padding<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">        overflow<span class="token operator">:</span> hidden<span class="token punctuation">;</span></span>
<span class="line">        background<span class="token operator">-</span>color<span class="token operator">:</span> transparent<span class="token punctuation">;</span></span>
<span class="line">        border<span class="token operator">:</span> 1px dashed <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>border<span class="token operator">-</span>color<span class="token operator">-</span>darker<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        border<span class="token operator">-</span>radius<span class="token operator">:</span> v<span class="token operator">-</span><span class="token function">bind</span><span class="token punctuation">(</span>borderRadius<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token operator">&amp;</span><span class="token operator">:</span>hover <span class="token punctuation">{</span></span>
<span class="line">          border<span class="token operator">:</span> 1px dashed <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>color<span class="token operator">-</span>primary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">.</span>el<span class="token operator">-</span>upload<span class="token operator">-</span>dragger<span class="token punctuation">.</span><span class="token keyword">is</span><span class="token operator">-</span>dragover <span class="token punctuation">{</span></span>
<span class="line">        background<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>color<span class="token operator">-</span>primary<span class="token operator">-</span>light<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        border<span class="token operator">:</span> 2px dashed <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>color<span class="token operator">-</span>primary<span class="token punctuation">)</span> <span class="token operator">!</span>important<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">.</span>upload<span class="token operator">-</span>image <span class="token punctuation">{</span></span>
<span class="line">        width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">        height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">        object<span class="token operator">-</span>fit<span class="token operator">:</span> contain<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">.</span>upload<span class="token operator">-</span>empty <span class="token punctuation">{</span></span>
<span class="line">        position<span class="token operator">:</span> relative<span class="token punctuation">;</span></span>
<span class="line">        display<span class="token operator">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">        flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span></span>
<span class="line">        align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">        justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">        font<span class="token operator">-</span>size<span class="token operator">:</span> 12px<span class="token punctuation">;</span></span>
<span class="line">        line<span class="token operator">-</span>height<span class="token operator">:</span> 30px<span class="token punctuation">;</span></span>
<span class="line">        color<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>color<span class="token operator">-</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">.</span>el<span class="token operator">-</span>icon <span class="token punctuation">{</span></span>
<span class="line">          font<span class="token operator">-</span>size<span class="token operator">:</span> 28px<span class="token punctuation">;</span></span>
<span class="line">          color<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>text<span class="token operator">-</span>color<span class="token operator">-</span>secondary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">.</span>upload<span class="token operator">-</span>handle <span class="token punctuation">{</span></span>
<span class="line">        position<span class="token operator">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">        top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">        right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">        box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span></span>
<span class="line">        display<span class="token operator">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">        align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">        justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">        width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">        height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">        cursor<span class="token operator">:</span> pointer<span class="token punctuation">;</span></span>
<span class="line">        background<span class="token operator">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">        transition<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>el<span class="token operator">-</span>transition<span class="token operator">-</span>duration<span class="token operator">-</span>fast<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">.</span>handle<span class="token operator">-</span>icon <span class="token punctuation">{</span></span>
<span class="line">          display<span class="token operator">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">          flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span></span>
<span class="line">          align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">          justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">          padding<span class="token operator">:</span> <span class="token number">0</span> <span class="token number">6</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">          color<span class="token operator">:</span> aliceblue<span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">.</span>el<span class="token operator">-</span>icon <span class="token punctuation">{</span></span>
<span class="line">            margin<span class="token operator">-</span>bottom<span class="token operator">:</span> <span class="token number">40</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">            font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">130</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">            line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">130</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">          span <span class="token punctuation">{</span></span>
<span class="line">            font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">85</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">            line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">85</span><span class="token operator">%</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">.</span>el<span class="token operator">-</span>upload__tip <span class="token punctuation">{</span></span>
<span class="line">    line<span class="token operator">-</span>height<span class="token operator">:</span> 18px<span class="token punctuation">;</span></span>
<span class="line">    text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用： 在需要的组件中引用</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">&quot;商品图片&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;picUrl&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>UploadImg</span>
<span class="line">        v<span class="token operator">-</span>model<span class="token operator">:</span>image<span class="token operator">-</span>url<span class="token operator">=</span><span class="token string">&quot;picUrl&quot;</span></span>
<span class="line">        width<span class="token operator">=</span><span class="token string">&quot;270px&quot;</span></span>
<span class="line">        height<span class="token operator">=</span><span class="token string">&quot;202px&quot;</span></span>
<span class="line">        <span class="token operator">:</span>file<span class="token operator">-</span>size<span class="token operator">=</span><span class="token string">&quot;10&quot;</span></span>
<span class="line">        <span class="token operator">:</span>enableDimension<span class="token operator">=</span><span class="token string">&quot;true&quot;</span></span>
<span class="line">    <span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>template #empty<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Avatar <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>请上传商品图片<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>template #tip<span class="token operator">&gt;</span></span>
<span class="line">        请上传尺寸为<span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span>，大小不超过10MB的<span class="token constant">PNG</span>、<span class="token constant">JPG</span>图片</span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>UploadImg<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)])])}const i=n(o,[["render",t]]),r=JSON.parse('{"path":"/%E5%A5%BD%E7%8E%A9%E7%9A%84%E7%BB%84%E4%BB%B6/%E5%B8%B8%E7%94%A8/vue/%E5%9B%BE%E7%89%87%E7%B1%BB.html","title":"图片类","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"好玩的组件/常用/vue/图片类.md"}');export{i as comp,r as data};
