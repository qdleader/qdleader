import{_ as a,c as e,a as n,o as r}from"./app-KfnfuIf0.js";const p={};function i(l,s){return r(),e("div",null,[...s[0]||(s[0]=[n(`<h1 id="服务器搭建redis" tabindex="-1"><a class="header-anchor" href="#服务器搭建redis"><span>服务器搭建redis</span></a></h1><h2 id="_1-获取redis资源" tabindex="-1"><a class="header-anchor" href="#_1-获取redis资源"><span>1.获取redis资源</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>io<span class="token operator">/</span>releases<span class="token operator">/</span>redis<span class="token operator">-</span><span class="token number">4.0</span><span class="token number">.8</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-解压" tabindex="-1"><a class="header-anchor" href="#_2-解压"><span>2.解压</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">tar xzvf redis<span class="token operator">-</span><span class="token number">4.0</span><span class="token number">.8</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_3-安装" tabindex="-1"><a class="header-anchor" href="#_3-安装"><span>3.安装</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd redis<span class="token operator">-</span><span class="token number">4.0</span><span class="token number">.8</span></span>
<span class="line">make</span>
<span class="line">cd src</span>
<span class="line">make install <span class="token constant">PREFIX</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-移动配置文件到安装目录下" tabindex="-1"><a class="header-anchor" href="#_4-移动配置文件到安装目录下"><span>4.移动配置文件到安装目录下</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span></span>
<span class="line">mkdir <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>etc</span>
<span class="line">mv redis<span class="token punctuation">.</span>conf <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>etc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-配置redis为后台启动" tabindex="-1"><a class="header-anchor" href="#_5-配置redis为后台启动"><span>5.配置redis为后台启动</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">vi <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token punctuation">.</span>conf <span class="token comment">//将daemonize no 改成daemonize yes</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_6-将redis加入到开机启动" tabindex="-1"><a class="header-anchor" href="#_6-将redis加入到开机启动"><span>6.将redis加入到开机启动</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">vi <span class="token operator">/</span>etc<span class="token operator">/</span>rc<span class="token punctuation">.</span>local <span class="token comment">//在里面添加内容：/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf (意思就是开机调用这段开启redis的命令)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_7-开启redis" tabindex="-1"><a class="header-anchor" href="#_7-开启redis"><span>7.开启redis</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>server <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token punctuation">.</span>conf </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p></p><h2 id="_8-将redis-cli-redis-server拷贝到bin下-让redis-cli指令可以在任意目录下直接使用" tabindex="-1"><a class="header-anchor" href="#_8-将redis-cli-redis-server拷贝到bin下-让redis-cli指令可以在任意目录下直接使用"><span>8.将redis-cli,redis-server拷贝到bin下，让redis-cli指令可以在任意目录下直接使用</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cp <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>server <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span></span>
<span class="line">cp <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>cli <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h2 id="_9-设置redis密码" tabindex="-1"><a class="header-anchor" href="#_9-设置redis密码"><span>9.设置redis密码</span></a></h2><p>a.运行命令：redis-cli b.查看现有的redis密码(可选操作，可以没有) 　　运行命令：config get requirepass 如果没有设置过密码的话运行结果会如下图所示 c.设置redis密码 运行命令：config set requirepass ****(****为你要设置的密码)，设置成功的话会返回‘OK’字样 d.测试连接 　　重启redis服务 　　//（redis-cli -h 127.0.0.1 -p 6379 -a ****（****为你设置的密码）） 　　输入 redis-cli 进入命令模式，使用 auth &#39;*****&#39; （****为你设置的密码）登陆</p><h2 id="_10-让外网能够访问redis" tabindex="-1"><a class="header-anchor" href="#_10-让外网能够访问redis"><span>10.让外网能够访问redis</span></a></h2><p>复制代码a.配置防火墙:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>zone<span class="token operator">=</span><span class="token keyword">public</span> <span class="token operator">--</span>add<span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">6379</span><span class="token operator">/</span>tcp <span class="token operator">--</span>permanent <span class="token comment">//（开放**6379**端口）</span></span>
<span class="line"></span>
<span class="line">systemctl restart firewalld <span class="token comment">//（重启防火墙以使配置即时生效）</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看系统所有开放的端口：firewall-cmd --zone=public --list-ports</p><p>b.此时 虽然防火墙开放了6379端口，但是外网还是无法访问的，因为redis监听的是127.0.0.1：6379，并不监听外网的请求。</p><p>（一）把文件夹目录里的redis.conf配置文件里的bind 127.0.0.1前面加#注释掉</p><p>（二）命令：redis-cli连接到redis后，通过 config get  daemonize和config get  protected-mode 是不是都为no，如果不是，就用config set 配置名 属性 改为no。</p><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令"><span>常用命令</span></a></h2><p>redis-server /usr/local/redis/etc/redis.conf //启动redis 　　pkill redis  //停止redis</p><h2 id="卸载redis" tabindex="-1"><a class="header-anchor" href="#卸载redis"><span>卸载redis：</span></a></h2><p>rm -rf /usr/local/redis //删除安装目录 　　　　rm -rf /usr/bin/redis-* //删除所有redis相关命令脚本 　　　　rm -rf /root/download/redis-4.0.4 //删除redis解压文件夹</p><h2 id="启动redis" tabindex="-1"><a class="header-anchor" href="#启动redis"><span>启动redis:</span></a></h2><p>两种方式：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">redis<span class="token operator">-</span>server <span class="token operator">&amp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>加上<code>&amp;</code>号使redis以后台程序方式运行</p><p>或者是</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">redis<span class="token operator">-</span>server</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>检测后台进程是否存在</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">ps <span class="token operator">-</span>ef <span class="token operator">|</span>grep redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>检测6379端口是否在监听</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">netstat <span class="token operator">-</span>lntp <span class="token operator">|</span> grep <span class="token number">6379</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>有时候会报异常</p><p>原因: Redis已经启动 解决: 关掉Redis,重启即可</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">redis<span class="token operator">-</span>cli shutdown</span>
<span class="line">redis<span class="token operator">-</span>server</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后你就能看到Redis愉快的运行了. 使用redis-cli客户端检测连接是否正常</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">redis<span class="token operator">-</span>cli</span>
<span class="line"><span class="token operator">&gt;</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> keys <span class="token operator">*</span></span>
<span class="line"><span class="token operator">&gt;</span><span class="token punctuation">(</span>empty list or set<span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&gt;</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">set</span> key <span class="token string">&quot;hello world&quot;</span> </span>
<span class="line"><span class="token operator">&gt;</span><span class="token constant">OK</span></span>
<span class="line"><span class="token operator">&gt;</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">get</span> key</span>
<span class="line"><span class="token operator">&gt;</span><span class="token string">&quot;hello world&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="停止redis" tabindex="-1"><a class="header-anchor" href="#停止redis"><span>停止redis:</span></a></h2><p>使用客户端</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">redis<span class="token operator">-</span>cli shutdown</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>因为Redis可以妥善处理SIGTERM信号，所以直接kill -9也是可以的</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">kill <span class="token operator">-</span><span class="token number">9</span> <span class="token constant">PID</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>#启动redis服务端</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">$ src<span class="token operator">/</span>redis<span class="token operator">-</span>server</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>#启动redis客户端</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">$ src<span class="token operator">/</span>redis<span class="token operator">-</span>cli</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看linux上面是否有安装redis,redis启动 检测是否有安装redis-cli和redis-server</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span># whereis redis<span class="token operator">-</span>cli</span>
<span class="line">redis<span class="token operator">-</span>cli<span class="token operator">:</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>cli</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span># whereis redis<span class="token operator">-</span>server</span>
<span class="line">redis<span class="token operator">-</span>server<span class="token operator">:</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>server</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Linux系统下设置redis的密码</p><p>1、进入redis操作的命令行 运行命令：redis-cli 2、查看现有的redis密码(可选操作，可以没有) 运行命令：config get requirepass如果没有设置过密码的话运行结果会如下图所示</p><p>3、设置redis密码 运行命令：config set requirepass ****(****为你要设置的密码)，设置成功的话会返回‘OK’字样</p><h2 id="_4、重启redis服务" tabindex="-1"><a class="header-anchor" href="#_4、重启redis服务"><span>4、重启redis服务</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">pkill redis</span>
<span class="line"><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>server <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>redis<span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token punctuation">.</span>conf </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5、使用密码登录redis" tabindex="-1"><a class="header-anchor" href="#_5、使用密码登录redis"><span>5、使用密码登录redis</span></a></h2><p>ctrl+C退出当前的命令行模式后运行命令： redis-cli -h 127.0.0.1 -p 6379 -a ****（****为你心设置的密码）</p><p>redis-cli -h 121.36.47.43 -p 6379</p>`,66)])])}const o=a(p,[["render",i]]),c=JSON.parse('{"path":"/%E6%9C%8D%E5%8A%A1%E7%AB%AF/redis/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BAredis.html","title":"服务器搭建redis","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768183010000,"contributors":[{"name":"qdleader","username":"qdleader","email":"yk4545945@163.com","commits":1,"url":"https://github.com/qdleader"}],"changelog":[{"hash":"c3ab6d103d428cdd6a361e045add7154fc9253f1","time":1768183010000,"email":"yk4545945@163.com","author":"qdleader","message":"docs(mcp): 新增Mastergo MCP配置文档，包含token获取方法"}]},"filePathRelative":"服务端/redis/服务器搭建redis.md"}');export{o as comp,c as data};
